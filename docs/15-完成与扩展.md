# ç¬¬ 15 è¯¾ï¼šå®Œæˆä¸æ‰©å±• ğŸš€

æ­å–œä½ å®Œæˆäº†æ•™ç¨‹ï¼ç°åœ¨è®©æˆ‘ä»¬å®Œå–„æ¸¸æˆå¹¶æ·»åŠ æ–°åŠŸèƒ½ã€‚

---

## 15.1 é¡¹ç›®æ£€æŸ¥æ¸…å•

ç¡®ä¿ä½ çš„é¡¹ç›®åŒ…å«ï¼š

- [ ] å®Œæ•´çš„æºä»£ç ï¼ˆæ‰€æœ‰æ¨¡å—ï¼‰
- [ ] Makefile
- [ ] README.md
- [ ] æ–‡æ¡£

---

## 15.2 æ‰©å±•åŠŸèƒ½å»ºè®®

### 1. å¤šç§é£Ÿç‰©ç±»å‹

```c
typedef enum {
    FOOD_APPLE,     // æ™®é€šï¼Œ10 åˆ†
    FOOD_BERRY,     // 5 åˆ†ï¼Œç”Ÿæˆå¿«
    FOOD_GOLDEN,    // 50 åˆ†ï¼Œç¨€æœ‰
    FOOD_POISON     // å‡åˆ†ï¼Œå°å¿ƒï¼
} FoodType;

typedef struct {
    Point position;
    FoodType type;
    int value;
    bool active;
} Food;
```

### 2. é“å…·ç³»ç»Ÿ

```c
typedef enum {
    POWER_SPEED_UP,     // åŠ é€Ÿ
    POWER_SPEED_DOWN,   // å‡é€Ÿ
    POWER_SHIELD,       // æŠ¤ç›¾
    POWER_GHOST,        // ç©¿å¢™
    POWER_SHRINK        // ç¼©çŸ­
} PowerUp;
```

### 3. å¤šç§è›‡çš®è‚¤

```c
typedef struct {
    char head_char;
    char body_char;
    int color_pair;
    const char* name;
} SnakeSkin;

SnakeSkin skins[] = {
    {'O', '#', 1, "Classic"},
    {'@', '*', 2, "Dragon"},
    {'H', 'H', 3, "Snake"},
    {'â–ˆ', 'â–“', 4, "Block"},
};
```

### 4. åœ°å›¾ç³»ç»Ÿ

```c
typedef struct {
    int width, height;
    char* tiles;  // 0=ç©ºï¼Œ1=å¢™ï¼Œ2=ä¼ é€é—¨
} Map;

bool is_wall(Map* m, int x, int y) {
    return m->tiles[y * m->width + x] == 1;
}
```

### 5. æ’è¡Œæ¦œç³»ç»Ÿ

```c
typedef struct {
    char name[32];
    int score;
    int level;
    time_t date;
} HighScore;

HighScore top_scores[10];

void save_score(const char* name, int score) {
    // ä¿å­˜åˆ°æ–‡ä»¶
}

void load_scores(void) {
    // ä»æ–‡ä»¶åŠ è½½
}

void show_leaderboard(void) {
    // æ˜¾ç¤ºæ’è¡Œæ¦œ
}
```

### 6. éŸ³æ•ˆï¼ˆç»ˆç«¯èœ‚é¸£ï¼‰

```c
#include <stdio.h>

void play_sound(int frequency, int duration) {
    printf("\007");  // ç»ˆç«¯èœ‚é¸£
    // æˆ–ä½¿ç”¨ç³»ç»Ÿå‘½ä»¤
    // system("beep -f 440 -l 100");
}

void sound_eat(void) {
    play_sound(800, 50);
}

void sound_die(void) {
    play_sound(200, 200);
    play_sound(150, 200);
}
```

### 7. æ¸¸æˆå­˜æ¡£

```c
typedef struct {
    Snake snake;
    Food food;
    int score;
    int level;
    time_t saved_time;
} SaveData;

void save_game(const char* filename, SaveData* data) {
    FILE* f = fopen(filename, "wb");
    fwrite(data, sizeof(SaveData), 1, f);
    fclose(f);
}

SaveData* load_game(const char* filename) {
    FILE* f = fopen(filename, "rb");
    SaveData* data = malloc(sizeof(SaveData));
    fread(data, sizeof(SaveData), 1, f);
    fclose(f);
    return data;
}
```

### 8. å¤šäººæ¨¡å¼

```c
typedef struct {
    Snake snake1;
    Snake snake2;
    // ...
} MultiplayerGame;

// P1 æ§åˆ¶ï¼šWASD
// P2 æ§åˆ¶ï¼šæ–¹å‘é”®
```

---

## 15.3 æ€§èƒ½ä¼˜åŒ–

### 1. å‡å°‘å±å¹•åˆ·æ–°

```c
// åªåˆ·æ–°å˜åŒ–çš„éƒ¨åˆ†
void render_delta(Game* g) {
    // æ¸…é™¤æ—§è›‡ä½ç½®
    draw_char(old_x, old_y, ' ');
    
    // ç»˜åˆ¶æ–°ä½ç½®
    draw_char(new_x, new_y, 'O');
    
    // åªåˆ·æ–°å°åŒºåŸŸ
    refresh();
}
```

### 2. å¯¹è±¡æ± 

```c
// é¢„åˆ†é…è›‡èº«æ®µï¼Œé¿å…é¢‘ç¹ malloc
Segment segment_pool[100];
int pool_index = 0;

Segment* alloc_segment(void) {
    if (pool_index < 100) {
        return &segment_pool[pool_index++];
    }
    return malloc(sizeof(Segment));
}
```

---

## 15.4 ä»£ç è´¨é‡

### ä½¿ç”¨é™æ€åˆ†æå·¥å…·

```bash
# cppcheck æ£€æŸ¥ä»£ç é—®é¢˜
cppcheck --enable=all src/

# clang-tidy
clang-tidy src/*.c
```

### å•å…ƒæµ‹è¯•

```c
// test_snake.c
#include <assert.h>

void test_snake_create(void) {
    Snake* s = snake_create(10, 10);
    assert(s != NULL);
    assert(s->length == 1);
    assert(s->head->x == 10);
    snake_destroy(s);
}

int main(void) {
    test_snake_create();
    printf("All tests passed!\n");
    return 0;
}
```

---

## 15.5 æ‰“åŒ…å‘å¸ƒ

### åˆ›å»º Release

```bash
# æ¸…ç†
make clean

# ç¼–è¯‘ Release ç‰ˆæœ¬
make release

# æ‰“åŒ…
tar -czvf snake_game_v1.0.tar.gz \
    snake_game \
    README.md \
    LICENSE

# ä¸Šä¼ åˆ° GitHub Releases
```

### æ·»åŠ å®‰è£…è„šæœ¬

```bash
#!/bin/bash
# install.sh

echo "Installing Snake Game..."
cp snake_game /usr/local/bin/
chmod +x /usr/local/bin/snake_game
echo "Installation complete!"
```

---

## 15.6 ä¸‹ä¸€æ­¥å­¦ä¹ 

### C è¯­è¨€è¿›é˜¶

- æ•°æ®ç»“æ„ä¸ç®—æ³•
- å¤šçº¿ç¨‹ç¼–ç¨‹
- ç½‘ç»œç¼–ç¨‹
- ç³»ç»Ÿç¼–ç¨‹

### æ¸¸æˆå¼€å‘

- SDL2 å›¾å½¢åº“
- OpenGL 3D å›¾å½¢
- æ¸¸æˆå¼•æ“åŸç†

### å…¶ä»–è¯­è¨€

- Rustï¼ˆç°ä»£ç³»ç»Ÿç¼–ç¨‹ï¼‰
- Pythonï¼ˆå¿«é€ŸåŸå‹ï¼‰
- JavaScriptï¼ˆç½‘é¡µæ¸¸æˆï¼‰

---

## 15.7 èµ„æºæ¨è

### ä¹¦ç±

- ã€ŠC Programming Languageã€‹- K&R
- ã€ŠC Primer Plusã€‹
- ã€ŠGame Programming Patternsã€‹

### ç½‘ç«™

- Learn C: https://learn-c.org
- Exorcism: https://exercism.org/tracks/c
- GNU C Manual: https://www.gnu.org/software/libc/manual/

### é¡¹ç›®çµæ„Ÿ

- ä¿„ç½—æ–¯æ–¹å—
- æ‰“ç –å—
- æ‰«é›·
- 2048

---

## ğŸ‰ æ­å–œæ¯•ä¸šï¼

ä½ å·²ç»å®Œæˆäº†ä»é›¶å¼€å§‹å®ç°è´ªåƒè›‡æ¸¸æˆçš„å®Œæ•´æ•™ç¨‹ï¼

**ä½ å­¦åˆ°äº†ï¼š**
- âœ… C è¯­è¨€åŸºç¡€è¯­æ³•
- âœ… æŒ‡é’ˆå’Œå†…å­˜ç®¡ç†
- âœ… é“¾è¡¨æ•°æ®ç»“æ„
- âœ… æ¨¡å—åŒ–ç¼–ç¨‹
- âœ… Makefile æ„å»º
- âœ… ncurses ç»ˆç«¯å›¾å½¢
- âœ… æ¸¸æˆå¾ªç¯å’ŒçŠ¶æ€æœº

**ç°åœ¨ä½ å¯ä»¥ï¼š**
- ğŸ¯ ç‹¬ç«‹å¼€å‘ C è¯­è¨€é¡¹ç›®
- ğŸ¯ é˜…è¯»å’Œç†è§£å¤§å‹ C ä»£ç 
- ğŸ¯ ç»§ç»­å­¦ä¹ æ›´é«˜çº§çš„ä¸»é¢˜

---

## ğŸ“ æ¯•ä¸šé¡¹ç›®

å®Œæˆä»¥ä¸‹æŒ‘æˆ˜æ¥è¯æ˜ä½ çš„æŠ€èƒ½ï¼š

1. **åŸºç¡€** - å®Œå–„å½“å‰è´ªåƒè›‡æ¸¸æˆ
2. **è¿›é˜¶** - æ·»åŠ è‡³å°‘ 3 ä¸ªæ‰©å±•åŠŸèƒ½
3. **å¤§å¸ˆ** - ä»é›¶å®ç°å¦ä¸€ä¸ªç»å…¸æ¸¸æˆï¼ˆä¿„ç½—æ–¯æ–¹å—/æ‰“ç –å—ï¼‰

---

**ç¥ä½ ç¼–ç¨‹æ„‰å¿«ï¼ğŸğŸ®**

[è¿”å›ç›®å½•](00-ç›®å½•.md)
